<!doctype html>
<html lang="en">
	<head>
		<link rel="stylesheet" href="../../reset.css" />
		<link rel="stylesheet" href="../../base.css" />
		<meta charset="utf-8" />
		<meta name="color-scheme" content="dark">
		<link rel="icon" href="../../favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		
		<link href="../../_app/immutable/assets/2.B4Zt5mAd.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/Tags.zOjeMBQI.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/Center.SiIiNQdp.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/Layout.BC5Y1jTu.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/Button.CO_IFsgN.css" rel="stylesheet">
		<link href="../../_app/immutable/assets/Comments.CwG70sSM.css" rel="stylesheet">
		<link rel="modulepreload" href="../../_app/immutable/entry/start.BaISzZWz.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/entry.C2bI1rCp.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/runtime.CL55K65K.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index.CKEXZrLS.js">
		<link rel="modulepreload" href="../../_app/immutable/entry/app.D_pr6Zu0.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/preload-helper.C1FmrZbK.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/render.CC6IpZNF.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/events.CZHO4uHy.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/disclose-version.pcXP8nla.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/if.MIU4WiqH.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/props.BF2gUOm6.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/store.BBvoG5rH.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/index-client.DxYZKCH8.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/0.bsMdv7Qd.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/snippet.CudX_7N8.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/2.D0zO1vW2.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/legacy.DLBMJjTQ.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Utils.CYFPyv2a.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Theming.CVjcmEt6.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/slot.p2w1RJjT.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/attributes.Dg39Wyaa.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/lifecycle.C2XJTX65.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Tags.BsadNXbU.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/ArticleLayout.CjnmrnlT.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Center.fkeCYN23.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Layout.hF4QT5ki.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/_commonjsHelpers.IXgdudvv.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Button.6yO6gXEz.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Comments.Cgl7qres.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Consent.eKf55JDX.js">
		<link rel="modulepreload" href="../../_app/immutable/nodes/14.CxLXKtcY.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/MdsvexLayout.CZcMrbXw.js">
		<link rel="modulepreload" href="../../_app/immutable/chunks/Code.Esccxh9n.js">
	</head>
	<body>
		<div style="display: contents"><!--[--><!--[--><!----><!--[--><!----><div style="background-color: black; background-image: url();" class="bg svelte-rfb14"><!--[!--><!--]--></div><!----> <div class="layout svelte-1kupl3e"><div class="header svelte-1kupl3e"><div class="title"><a class="site-title svelte-1kupl3e" rel="author" href="/"><span style="color:palevioletred">hey</span><span style="color:orange">joe</span><span style="color:skyblue">way</span><span style="color:white">.</span></a></div> <div class="nav svelte-1kupl3e"><div style="width: default; height: 32px;" class="clickable svelte-1f9eqjh"><!--[--><a href="/articles" data-sveltekit-reload="false" data-sveltekit-preload-data="hover" class="svelte-1f9eqjh"><!--[!--><!----><div style="color: white;" class="svelte-1kdig2t"><!--[!--><!--]--> <!----><!---->Articles<!----></div><!----><!--]--></a><!--]--></div><!----> <div style="width: default; height: 32px;" class="clickable svelte-1f9eqjh"><!--[--><a href="/feeds" data-sveltekit-reload="false" data-sveltekit-preload-data="hover" class="svelte-1f9eqjh"><!--[!--><!----><div style="color: white;" class="svelte-1kdig2t"><!--[!--><!--]--> <!----><!---->Feeds<!----></div><!----><!--]--></a><!--]--></div><!----></div></div> <!----><!----><div class="header-container svelte-nevtvt"><div><h1 class="svelte-nevtvt">Notes: Migrate Debian Linode to Proxmox</h1> <div class="svelte-1gxf1qy"><!--[--><a href="/category/software/" class="svelte-1gxf1qy">software</a><a href="/category/linux/" class="svelte-1gxf1qy">linux</a><!--]--></div><!----></div> <div class="times svelte-nevtvt"><!--[--><!--[--><time class="dt svelte-nevtvt" datetime="2025-03-03T22:08:14-05:00" itemprop="datePublished">Published Mar 4, 2025</time> <br><!--]--><!--[--><time class="dt svelte-nevtvt" datetime="2025-03-06T14:32:30-05:00" itemprop="datePublished">Last modified Mar 6, 2025</time> <br><!--]--><!--]--></div></div> <br> <hr> <!----><!----><!----><p>These are old notes from like 2022, but the process is probably still mostly the same. Let me know if there are any issues.</p> <ol><li><a href="https://techdocs.akamai.com/cloud-computing/docs/copy-a-disk-over-ssh" rel="nofollow">Download your Linode’s disk image.</a></li> <li><a href="https://pve.proxmox.com/wiki/Migrate_to_Proxmox_VE#Import_Disk" rel="nofollow">Import the disk image to an existing VM in Proxmox.</a> Make sure the VM is configured for BIOS boot, not UEFI.</li></ol> <p>Our Linode image only contains the system partition, that is to say what is normally <code>/dev/sda1</code> is instead the entire disk, <code>/dev/sda</code>. We’ll need to copy the entire disk’s data to a partition on a new disk so that we can fit a partition layout and therefore a bootloader.</p> <ol start="3"><li>Create another disk of the same size and attach it to the VM.</li> <li>Download, attach, and boot <a href="https://gparted.org/download.php" rel="nofollow">GParted Live</a>.</li> <li>Initialize partition table of other disk using MBR format.</li> <li>Create a partition filling the entire disk and apply the changes.</li> <li>Time for the terminal!</li></ol> <!----><pre><code><span class="hljs-comment"># Get root shell</span>
<span class="hljs-built_in">sudo</span> su
<span class="hljs-comment"># Copy the data!</span>
<span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/sda of=/dev/sdb1 status=progress
<span class="hljs-comment"># Time to do some config editing...</span>
mount /dev/sdb1 /mnt
<span class="hljs-comment"># In fstab, comment out the line pointing to the swap partition.</span>
nano /mnt/etc/fstab
<span class="hljs-comment"># Remove the command line parameters from the GRUB config.</span>
nano /mnt/etc/default/grub
<span class="hljs-comment"># Install the GRUB bootloader</span>
grub install --boot-directory=/mnt/boot /dev/sdb
<span class="hljs-comment"># The output it provides is gonna be a bit screwed up for now.</span>
<span class="hljs-comment"># Edit the file below to replace all `root=/dev/sda` with `root=/dev/sda1`</span>
nano /mnt/boot/grub/grub.cfg

poweroff</code></pre><!----><!----> <ol start="8"><li>Remove the assigned ISO and original system disk image, then boot. You should be able to get to your normal shell.</li> <li>More terminal!</li></ol> <!----><pre><code><span class="hljs-comment"># Get root again...</span>
<span class="hljs-built_in">sudo</span> su
<span class="hljs-comment"># Fix the bootloader for real this time</span>
update-grub
<span class="hljs-comment"># Fix your network interfaces (https://wiki.debian.org/NetworkConfiguration)</span>
nano /etc/network/interfaces
<span class="hljs-comment"># Fix your APT sources by replacing all instances of `mirrors.linode.com` with `deb.debian.org`</span>
nano /etc/apt/sources.list
<span class="hljs-comment"># Empty this file and fix your DNS nameservers. You should probably point it to your router if you don&#x27;t know what you want to put here.</span>
nano /etc/resolv.conf
<span class="hljs-comment"># Off to the races!</span>
apt update
apt upgrade</code></pre><!----><!----><!----><!----><!----> <br> <!--[--><hr> <!--[!--><div class="svelte-zdtn5w"><!----><p><!---->Comments are currently disabled.<!----></p> <br> <div style="width: default; height: 32px;" class="clickable svelte-1f9eqjh"><!--[!--><!----><div style="color: white;" class="svelte-1kdig2t"><!--[!--><!--]--> <!----><!---->Enable Comments<!----></div><!----><!--]--></div><!----><br> <p style="text-align: center;"><!---->By enabling comments, you agree to allow this website to connect to Cusdis and to the <a href="https://cusdis.com/privacy-policy" target="_blank">Cusdis Privacy Policy</a>.<!----></p><!----></div><!--]--><!----><!--]--><!----> <hr> <div class="svelte-zdtn5w"><!----><div class="svelte-1gxf1qy"><!--[--><a href="/category/design/" class="svelte-1gxf1qy">design</a><a href="/category/ui/" class="svelte-1gxf1qy">ui</a><a href="/category/meta/" class="svelte-1gxf1qy">meta</a><a href="/category/life/" class="svelte-1gxf1qy">life</a><a href="/category/work/" class="svelte-1gxf1qy">work</a><a href="/category/portfolio/" class="svelte-1gxf1qy">portfolio</a><a href="/category/programming/" class="svelte-1gxf1qy">programming</a><a href="/category/software/" class="svelte-1gxf1qy">software</a><a href="/category/macos/" class="svelte-1gxf1qy">macos</a><a href="/category/multiplatform/" class="svelte-1gxf1qy">multiplatform</a><a href="/category/games/" class="svelte-1gxf1qy">games</a><a href="/category/photography/" class="svelte-1gxf1qy">photography</a><a href="/category/windows/" class="svelte-1gxf1qy">windows</a><a href="/category/linux/" class="svelte-1gxf1qy">linux</a><a href="/category/tools/" class="svelte-1gxf1qy">tools</a><a href="/category/proxmox/" class="svelte-1gxf1qy">proxmox</a><!--]--></div><!----></div><!----> <br><!----></div><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_1ssa69h = {
						base: new URL("../..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					const data = [{"type":"data","data":{categories:["design","ui","meta","life","work","portfolio","programming","software","macos","multiplatform","games","photography","windows","linux","tools","proxmox"]},"uses":{},"slash":"always"},{"type":"data","data":{fm:{title:"Notes: Migrate Debian Linode to Proxmox",categories:"software linux",comments:true,last_modified_at:"2025-03-06T14:32:30-05:00",date:"2025-03-03T22:08:14-05:00"},id:"/articles/notes-linodemigration"},"uses":{"route":1}},null];

					Promise.all([
						import("../../_app/immutable/entry/start.BaISzZWz.js"),
						import("../../_app/immutable/entry/app.D_pr6Zu0.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 14],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
