/**
 * tua-body-scroll-lock v1.5.3
 * (c) 2024 Evinma, BuptStEve
 * @license MIT
 */var s=function(){return typeof window>"u"},h=function(t){t=t||navigator.userAgent;var n=/(iPad).*OS\s([\d_]+)/.test(t),o=!n&&/(iPhone\sOS)\s([\d_]+)/.test(t),i=/(Android);?[\s/]+([\d.]+)?/.test(t),r=o||n;return{ios:r,android:i}};function p(e){if(s())return!1;if(!e)throw new Error("options must be provided");var t=!1,n={get passive(){t=!0}},o=function(){},i="__TUA_BSL_TEST_PASSIVE__";window.addEventListener(i,o,n),window.removeEventListener(i,o,n);var r=e.capture;return t?e:typeof r<"u"?r:!1}function _(){return"__BSL_PREVENT_DEFAULT__"in window||(window.__BSL_PREVENT_DEFAULT__=function(e){e.cancelable&&e.preventDefault()}),window.__BSL_PREVENT_DEFAULT__}function S(e){return e?Array.isArray(e)?e:[e]:[]}var d={lockedNum:0,lockedElements:[],unLockCallback:null,documentListenerAdded:!1,initialClientPos:{clientX:0,clientY:0}};function a(e){if(s())return d;if(!(e!=null&&e.useGlobalLockState))return a.lockState;var t="__BSL_LOCK_STATE__"in window?Object.assign(Object.assign({},d),window.__BSL_LOCK_STATE__):d;return window.__BSL_LOCK_STATE__=t,t}a.lockState=d;function g(e,t,n){if(t){var o=t.scrollTop,i=t.scrollLeft,r=t.scrollWidth,l=t.scrollHeight,c=t.clientWidth,u=t.clientHeight,f=e.targetTouches[0].clientX-n.clientX,v=e.targetTouches[0].clientY-n.clientY,w=Math.abs(v)>Math.abs(f),L=v>0&&o===0,y=f>0&&i===0,E=f<0&&i+c+1>=r,m=v<0&&o+u+1>=l;if(w&&(L||m)||!w&&(y||E))return _()(e)}return e.stopPropagation(),!0}function T(){var e=document.documentElement,t=Object.assign({},e.style),n=window.innerWidth-e.clientWidth,o=parseInt(window.getComputedStyle(e).paddingRight,10);return e.style.overflow="hidden",e.style.boxSizing="border-box",e.style.paddingRight="".concat(n+o,"px"),function(){["overflow","boxSizing","paddingRight"].forEach(function(i){e.style[i]=t[i]||""})}}function k(e){var t=document.documentElement,n=document.body,o=t.scrollTop||n.scrollTop,i=Object.assign({},t.style),r=Object.assign({},n.style);return t.style.height="100%",t.style.overflow="hidden",n.style.top="-".concat(o,"px"),n.style.width="100%",n.style.height="auto",n.style.position="fixed",n.style.overflow="hidden",function(){t.style.height=i.height||"",t.style.overflow=i.overflow||"",["top","width","height","overflow","position"].forEach(function(c){n.style[c]=r[c]||""});var l="scrollBehavior"in document.documentElement.style;l?window.scrollTo({top:o,behavior:"instant"}):window.scrollTo(0,o)}}function P(e,t){if(!s()){var n=h(),o=a(t);n.ios?(S(e).filter(function(i){return i&&o.lockedElements.indexOf(i)===-1}).forEach(function(i){i.ontouchstart=function(r){var l=r.targetTouches[0],c=l.clientX,u=l.clientY;o.initialClientPos={clientX:c,clientY:u}},i.ontouchmove=function(r){g(r,i,o.initialClientPos)},o.lockedElements.push(i)}),A(o)):o.lockedNum<=0&&(o.unLockCallback=n.android?k():T()),o.lockedNum+=1}}function B(e,t){if(!s()){var n=a(t);n.lockedNum-=1,!(n.lockedNum>0)&&(b(n)||(S(e).forEach(function(o){var i=n.lockedElements.indexOf(o);o&&i!==-1&&(o.ontouchmove=null,o.ontouchstart=null,n.lockedElements.splice(i,1))}),O(n)))}}function b(e){return h().ios||typeof e.unLockCallback!="function"?!1:(e.unLockCallback(),!0)}function A(e){h().ios&&(e.documentListenerAdded||(document.addEventListener("touchmove",_(),p({passive:!1})),e.documentListenerAdded=!0))}function O(e){e.documentListenerAdded&&(document.removeEventListener("touchmove",_(),p({passive:!1})),e.documentListenerAdded=!1)}export{P as l,B as u};
