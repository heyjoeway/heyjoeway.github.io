const ue=Symbol.for("yaml.alias"),Ie=Symbol.for("yaml.document"),T=Symbol.for("yaml.map"),$e=Symbol.for("yaml.pair"),de=Symbol.for("yaml.scalar"),z=Symbol.for("yaml.seq"),C=Symbol.for("yaml.node.type"),V=n=>!!n&&typeof n=="object"&&n[C]===ue,ne=n=>!!n&&typeof n=="object"&&n[C]===Ie,Ee=n=>!!n&&typeof n=="object"&&n[C]===T,N=n=>!!n&&typeof n=="object"&&n[C]===$e,E=n=>!!n&&typeof n=="object"&&n[C]===de,he=n=>!!n&&typeof n=="object"&&n[C]===z;function L(n){if(n&&typeof n=="object")switch(n[C]){case T:case z:return!0}return!1}function A(n){if(n&&typeof n=="object")switch(n[C]){case ue:case T:case de:case z:return!0}return!1}const De=n=>(E(n)||L(n))&&!!n.anchor,I=Symbol("break visit"),Te=Symbol("skip children"),U=Symbol("remove node");function Y(n,e){const t=Je(e);ne(n)?F(null,n.contents,t,Object.freeze([n]))===U&&(n.contents=null):F(null,n,t,Object.freeze([]))}Y.BREAK=I;Y.SKIP=Te;Y.REMOVE=U;function F(n,e,t,s){const r=Fe(n,e,t,s);if(A(r)||N(r))return _e(n,s,r),F(n,r,t,s);if(typeof r!="symbol"){if(L(e)){s=Object.freeze(s.concat(e));for(let i=0;i<e.items.length;++i){const o=F(i,e.items[i],t,s);if(typeof o=="number")i=o-1;else{if(o===I)return I;o===U&&(e.items.splice(i,1),i-=1)}}}else if(N(e)){s=Object.freeze(s.concat(e));const i=F("key",e.key,t,s);if(i===I)return I;i===U&&(e.key=null);const o=F("value",e.value,t,s);if(o===I)return I;o===U&&(e.value=null)}}return r}function Je(n){return typeof n=="object"&&(n.Collection||n.Node||n.Value)?Object.assign({Alias:n.Node,Map:n.Node,Scalar:n.Node,Seq:n.Node},n.Value&&{Map:n.Value,Scalar:n.Value,Seq:n.Value},n.Collection&&{Map:n.Collection,Seq:n.Collection},n):n}function Fe(n,e,t,s){var r,i,o,l,f;if(typeof t=="function")return t(n,e,s);if(Ee(e))return(r=t.Map)==null?void 0:r.call(t,n,e,s);if(he(e))return(i=t.Seq)==null?void 0:i.call(t,n,e,s);if(N(e))return(o=t.Pair)==null?void 0:o.call(t,n,e,s);if(E(e))return(l=t.Scalar)==null?void 0:l.call(t,n,e,s);if(V(e))return(f=t.Alias)==null?void 0:f.call(t,n,e,s)}function _e(n,e,t){const s=e[e.length-1];if(L(s))s.items[n]=t;else if(N(s))n==="key"?s.key=t:s.value=t;else if(ne(s))s.contents=t;else{const r=V(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}function Ne(n){if(/[\x00-\x19\s,[\]{}]/.test(n)){const t=`Anchor must not contain whitespace or control characters: ${JSON.stringify(n)}`;throw new Error(t)}return!0}function R(n,e,t,s){if(s&&typeof s=="object")if(Array.isArray(s))for(let r=0,i=s.length;r<i;++r){const o=s[r],l=R(n,s,String(r),o);l===void 0?delete s[r]:l!==o&&(s[r]=l)}else if(s instanceof Map)for(const r of Array.from(s.keys())){const i=s.get(r),o=R(n,s,r,i);o===void 0?s.delete(r):o!==i&&s.set(r,o)}else if(s instanceof Set)for(const r of Array.from(s)){const i=R(n,s,r,r);i===void 0?s.delete(r):i!==r&&(s.delete(r),s.add(i))}else for(const[r,i]of Object.entries(s)){const o=R(n,s,r,i);o===void 0?delete s[r]:o!==i&&(s[r]=o)}return n.call(e,t,s)}function M(n,e,t){if(Array.isArray(n))return n.map((s,r)=>M(s,String(r),t));if(n&&typeof n.toJSON=="function"){if(!t||!De(n))return n.toJSON(e,t);const s={aliasCount:0,count:1,res:void 0};t.anchors.set(n,s),t.onCreate=i=>{s.res=i,delete t.onCreate};const r=n.toJSON(e,t);return t.onCreate&&t.onCreate(r),r}return typeof n=="bigint"&&!(t!=null&&t.keep)?Number(n):n}class ge{constructor(e){Object.defineProperty(this,C,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:t,maxAliasCount:s,onAnchor:r,reviver:i}={}){if(!ne(e))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:e,keep:!0,mapAsMap:t===!0,mapKeyWarned:!1,maxAliasCount:typeof s=="number"?s:100},l=M(this,"",o);if(typeof r=="function")for(const{count:f,res:c}of o.anchors.values())r(c,f);return typeof i=="function"?R(i,{"":l},"",l):l}}class Ke extends ge{constructor(e){super(ue),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return Y(e,{Node:(s,r)=>{if(r===this)return Y.BREAK;r.anchor===this.source&&(t=r)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:s,doc:r,maxAliasCount:i}=t,o=this.resolve(r);if(!o){const f=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(f)}let l=s.get(o);if(l||(M(o,null,t),l=s.get(o)),!l||l.res===void 0){const f="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(f)}if(i>=0&&(l.count+=1,l.aliasCount===0&&(l.aliasCount=X(r,o,s)),l.count*l.aliasCount>i)){const f="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(f)}return l.res}toString(e,t,s){const r=`*${this.source}`;if(e){if(Ne(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${r} `}return r}}function X(n,e,t){if(V(e)){const s=e.resolve(n),r=t&&s&&t.get(s);return r?r.count*r.aliasCount:0}else if(L(e)){let s=0;for(const r of e.items){const i=X(n,r,t);i>s&&(s=i)}return s}else if(N(e)){const s=X(n,e.key,t),r=X(n,e.value,t);return Math.max(s,r)}return 1}const Ae=n=>!n||typeof n!="function"&&typeof n!="object";class w extends ge{constructor(e){super(de),this.value=e}toJSON(e,t){return t!=null&&t.keep?this.value:M(this.value,e,t)}toString(){return String(this.value)}}w.BLOCK_FOLDED="BLOCK_FOLDED";w.BLOCK_LITERAL="BLOCK_LITERAL";w.PLAIN="PLAIN";w.QUOTE_DOUBLE="QUOTE_DOUBLE";w.QUOTE_SINGLE="QUOTE_SINGLE";function Ve(n,e,t){return t.find(s=>{var r;return((r=s.identify)==null?void 0:r.call(s,n))&&!s.format})}function x(n,e,t){var h,g,d;if(ne(n)&&(n=n.contents),A(n))return n;if(N(n)){const p=(g=(h=t.schema[T]).createNode)==null?void 0:g.call(h,t.schema,null,t);return p.items.push(n),p}(n instanceof String||n instanceof Number||n instanceof Boolean||typeof BigInt<"u"&&n instanceof BigInt)&&(n=n.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:l}=t;let f;if(s&&n&&typeof n=="object"){if(f=l.get(n),f)return f.anchor||(f.anchor=r(n)),new Ke(f.anchor);f={anchor:null,node:null},l.set(n,f)}let c=Ve(n,e,o.tags);if(!c){if(n&&typeof n.toJSON=="function"&&(n=n.toJSON()),!n||typeof n!="object"){const p=new w(n);return f&&(f.node=p),p}c=n instanceof Map?o[T]:Symbol.iterator in Object(n)?o[z]:o[T]}i&&(i(c),delete t.onTagObj);const m=c!=null&&c.createNode?c.createNode(t.schema,n,t):typeof((d=c==null?void 0:c.nodeClass)==null?void 0:d.from)=="function"?c.nodeClass.from(t.schema,n,t):new w(n);return c.default||(m.tag=c.tag),f&&(f.node=m),m}function we(n,e,t){let s=t;for(let r=e.length-1;r>=0;--r){const i=e[r];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const o=[];o[i]=s,s=o}else s=new Map([[i,s]])}return x(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:n,sourceObjects:new Map})}const Qe=n=>n==null||typeof n=="object"&&!!n[Symbol.iterator]().next().done;class Le extends ge{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map(s=>A(s)||N(s)?s.clone(e):s),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Qe(e))this.add(t);else{const[s,...r]=e,i=this.get(s,!0);if(L(i))i.addIn(r,t);else if(i===void 0&&this.schema)this.set(s,we(this.schema,r,t));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}deleteIn(e){const[t,...s]=e;if(s.length===0)return this.delete(t);const r=this.get(t,!0);if(L(r))return r.deleteIn(s);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${s}`)}getIn(e,t){const[s,...r]=e,i=this.get(s,!0);return r.length===0?!t&&E(i)?i.value:i:L(i)?i.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every(t=>{if(!N(t))return!1;const s=t.value;return s==null||e&&E(s)&&s.value==null&&!s.commentBefore&&!s.comment&&!s.tag})}hasIn(e){const[t,...s]=e;if(s.length===0)return this.has(t);const r=this.get(t,!0);return L(r)?r.hasIn(s):!1}setIn(e,t){const[s,...r]=e;if(r.length===0)this.set(s,t);else{const i=this.get(s,!0);if(L(i))i.setIn(r,t);else if(i===void 0&&this.schema)this.set(s,we(this.schema,r,t));else throw new Error(`Expected YAML collection at ${s}. Remaining path: ${r}`)}}}const Re=n=>n.replace(/^(?!$)(?: $)?/gm,"#");function W(n,e){return/^\n+$/.test(n)?n.substring(1):e?n.replace(/^(?! *$)/gm,e):n}const _=(n,e,t)=>n.endsWith(`
`)?W(t,e):t.includes(`
`)?`
`+W(t,e):(n.endsWith(" ")?"":" ")+t,je="flow",le="block",Z="quoted";function se(n,e,t="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:l}={}){if(!r||r<0)return n;r<i&&(i=0);const f=Math.max(1+i,1+r-e.length);if(n.length<=f)return n;const c=[],m={};let h=r-e.length;typeof s=="number"&&(s>r-Math.max(2,i)?c.push(0):h=r-s);let g,d,p=!1,a=-1,u=-1,O=-1;t===le&&(a=Oe(n,a,e.length),a!==-1&&(h=a+f));for(let b;b=n[a+=1];){if(t===Z&&b==="\\"){switch(u=a,n[a+1]){case"x":a+=3;break;case"u":a+=5;break;case"U":a+=9;break;default:a+=1}O=a}if(b===`
`)t===le&&(a=Oe(n,a,e.length)),h=a+e.length+f,g=void 0;else{if(b===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){const S=n[a+1];S&&S!==" "&&S!==`
`&&S!=="	"&&(g=a)}if(a>=h)if(g)c.push(g),h=g+f,g=void 0;else if(t===Z){for(;d===" "||d==="	";)d=b,b=n[a+=1],p=!0;const S=a>O+1?a-2:u-1;if(m[S])return n;c.push(S),m[S]=!0,h=S+f,g=void 0}else p=!0}d=b}if(p&&l&&l(),c.length===0)return n;o&&o();let y=n.slice(0,c[0]);for(let b=0;b<c.length;++b){const S=c[b],$=c[b+1]||n.length;S===0?y=`
${e}${n.slice(0,$)}`:(t===Z&&m[S]&&(y+=`${n[S]}\\`),y+=`
${e}${n.slice(S+1,$)}`)}return y}function Oe(n,e,t){let s=e,r=e+1,i=n[r];for(;i===" "||i==="	";)if(e<r+t)i=n[++e];else{do i=n[++e];while(i&&i!==`
`);s=e,r=e+1,i=n[r]}return s}const re=(n,e)=>({indentAtStart:e?n.indent.length:n.indentAtStart,lineWidth:n.options.lineWidth,minContentWidth:n.options.minContentWidth}),ie=n=>/^(%|---|\.\.\.)/m.test(n);function Ue(n,e,t){if(!e||e<0)return!1;const s=e-t,r=n.length;if(r<=s)return!1;for(let i=0,o=0;i<r;++i)if(n[i]===`
`){if(i-o>s)return!0;if(o=i+1,r-o<=s)return!1}return!0}function q(n,e){const t=JSON.stringify(n);if(e.options.doubleQuotedAsJSON)return t;const{implicitKey:s}=e,r=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(ie(n)?"  ":"");let o="",l=0;for(let f=0,c=t[f];c;c=t[++f])if(c===" "&&t[f+1]==="\\"&&t[f+2]==="n"&&(o+=t.slice(l,f)+"\\ ",f+=1,l=f,c="\\"),c==="\\")switch(t[f+1]){case"u":{o+=t.slice(l,f);const m=t.substr(f+2,4);switch(m){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:m.substr(0,2)==="00"?o+="\\x"+m.substr(2):o+=t.substr(f,6)}f+=5,l=f+1}break;case"n":if(s||t[f+2]==='"'||t.length<r)f+=1;else{for(o+=t.slice(l,f)+`

`;t[f+2]==="\\"&&t[f+3]==="n"&&t[f+4]!=='"';)o+=`
`,f+=2;o+=i,t[f+2]===" "&&(o+="\\"),f+=1,l=f+1}break;default:f+=1}return o=l?o+t.slice(l):t,s?o:se(o,i,Z,re(e,!1))}function ce(n,e){if(e.options.singleQuote===!1||e.implicitKey&&n.includes(`
`)||/[ \t]\n|\n[ \t]/.test(n))return q(n,e);const t=e.indent||(ie(n)?"  ":""),s="'"+n.replace(/'/g,"''").replace(/\n+/g,`$&
${t}`)+"'";return e.implicitKey?s:se(s,t,je,re(e,!1))}function K(n,e){const{singleQuote:t}=e.options;let s;if(t===!1)s=q;else{const r=n.includes('"'),i=n.includes("'");r&&!i?s=ce:i&&!r?s=q:s=t?ce:q}return s(n,e)}let ae;try{ae=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{ae=/\n+(?!\n|$)/g}function v({comment:n,type:e,value:t},s,r,i){const{blockQuote:o,commentString:l,lineWidth:f}=s.options;if(!o||/\n[\t ]+$/.test(t)||/^\s*$/.test(t))return K(t,s);const c=s.indent||(s.forceBlockIndent||ie(t)?"  ":""),m=o==="literal"?!0:o==="folded"||e===w.BLOCK_FOLDED?!1:e===w.BLOCK_LITERAL?!0:!Ue(t,f,c.length);if(!t)return m?`|
`:`>
`;let h,g;for(g=t.length;g>0;--g){const $=t[g-1];if($!==`
`&&$!=="	"&&$!==" ")break}let d=t.substring(g);const p=d.indexOf(`
`);p===-1?h="-":t===d||p!==d.length-1?(h="+",i&&i()):h="",d&&(t=t.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(ae,`$&${c}`));let a=!1,u,O=-1;for(u=0;u<t.length;++u){const $=t[u];if($===" ")a=!0;else if($===`
`)O=u;else break}let y=t.substring(0,O<u?O+1:u);y&&(t=t.substring(y.length),y=y.replace(/\n+/g,`$&${c}`));let S=(a?c?"2":"1":"")+h;if(n&&(S+=" "+l(n.replace(/ ?[\r\n]+/g," ")),r&&r()),!m){const $=t.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`);let j=!1;const k=re(s,!0);o!=="folded"&&e!==w.BLOCK_FOLDED&&(k.onOverflow=()=>{j=!0});const Q=se(`${y}${$}${d}`,c,le,k);if(!j)return`>${S}
${c}${Q}`}return t=t.replace(/\n+/g,`$&${c}`),`|${S}
${c}${y}${t}${d}`}function qe(n,e,t,s){const{type:r,value:i}=n,{actualString:o,implicitKey:l,indent:f,indentStep:c,inFlow:m}=e;if(l&&i.includes(`
`)||m&&/[[\]{},]/.test(i))return K(i,e);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return l||m||!i.includes(`
`)?K(i,e):v(n,e,t,s);if(!l&&!m&&r!==w.PLAIN&&i.includes(`
`))return v(n,e,t,s);if(ie(i)){if(f==="")return e.forceBlockIndent=!0,v(n,e,t,s);if(l&&f===c)return K(i,e)}const h=i.replace(/\n+/g,`$&
${f}`);if(o){const g=a=>{var u;return a.default&&a.tag!=="tag:yaml.org,2002:str"&&((u=a.test)==null?void 0:u.test(h))},{compat:d,tags:p}=e.doc.schema;if(p.some(g)||d!=null&&d.some(g))return K(i,e)}return l?h:se(h,f,je,re(e,!1))}function Ye(n,e,t,s){const{implicitKey:r,inFlow:i}=e,o=typeof n.value=="string"?n:Object.assign({},n,{value:String(n.value)});let{type:l}=n;l!==w.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(l=w.QUOTE_DOUBLE);const f=m=>{switch(m){case w.BLOCK_FOLDED:case w.BLOCK_LITERAL:return r||i?K(o.value,e):v(o,e,t,s);case w.QUOTE_DOUBLE:return q(o.value,e);case w.QUOTE_SINGLE:return ce(o.value,e);case w.PLAIN:return qe(o,e,t,s);default:return null}};let c=f(l);if(c===null){const{defaultKeyType:m,defaultStringType:h}=e.options,g=r&&m||h;if(c=f(g),c===null)throw new Error(`Unsupported default string type ${g}`)}return c}function We(n,e){const t=Object.assign({blockQuote:!0,commentString:Re,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},n.schema.toStringOptions,e);let s;switch(t.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:n,flowCollectionPadding:t.flowCollectionPadding?" ":"",indent:"",indentStep:typeof t.indent=="number"?" ".repeat(t.indent):"  ",inFlow:s,options:t}}function ze(n,e){var r;if(e.tag){const i=n.filter(o=>o.tag===e.tag);if(i.length>0)return i.find(o=>o.format===e.format)??i[0]}let t,s;if(E(e)){s=e.value;let i=n.filter(o=>{var l;return(l=o.identify)==null?void 0:l.call(o,s)});if(i.length>1){const o=i.filter(l=>l.test);o.length>0&&(i=o)}t=i.find(o=>o.format===e.format)??i.find(o=>!o.format)}else s=e,t=n.find(i=>i.nodeClass&&s instanceof i.nodeClass);if(!t){const i=((r=s==null?void 0:s.constructor)==null?void 0:r.name)??typeof s;throw new Error(`Tag not resolved for ${i} value`)}return t}function Ge(n,e,{anchors:t,doc:s}){if(!s.directives)return"";const r=[],i=(E(n)||L(n))&&n.anchor;i&&Ne(i)&&(t.add(i),r.push(`&${i}`));const o=n.tag?n.tag:e.default?null:e.tag;return o&&r.push(s.directives.tagString(o)),r.join(" ")}function ee(n,e,t,s){var f;if(N(n))return n.toString(e,t,s);if(V(n)){if(e.doc.directives)return n.toString(e);if((f=e.resolvedAliases)!=null&&f.has(n))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(n):e.resolvedAliases=new Set([n]),n=n.resolve(e.doc)}let r;const i=A(n)?n:e.doc.createNode(n,{onTagObj:c=>r=c});r||(r=ze(e.doc.schema.tags,i));const o=Ge(i,r,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const l=typeof r.stringify=="function"?r.stringify(i,e,t,s):E(i)?Ye(i,e,t,s):i.toString(e,t,s);return o?E(i)||l[0]==="{"||l[0]==="["?`${o} ${l}`:`${o}
${e.indent}${l}`:l}function He({key:n,value:e},t,s,r){const{allNullValues:i,doc:o,indent:l,indentStep:f,options:{commentString:c,indentSeq:m,simpleKeys:h}}=t;let g=A(n)&&n.comment||null;if(h){if(g)throw new Error("With simple keys, key nodes cannot have comments");if(L(n)||!A(n)&&typeof n=="object"){const k="With simple keys, collection cannot be used as a key value";throw new Error(k)}}let d=!h&&(!n||g&&e==null&&!t.inFlow||L(n)||(E(n)?n.type===w.BLOCK_FOLDED||n.type===w.BLOCK_LITERAL:typeof n=="object"));t=Object.assign({},t,{allNullValues:!1,implicitKey:!d&&(h||!i),indent:l+f});let p=!1,a=!1,u=ee(n,t,()=>p=!0,()=>a=!0);if(!d&&!t.inFlow&&u.length>1024){if(h)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(t.inFlow){if(i||e==null)return p&&s&&s(),u===""?"?":d?`? ${u}`:u}else if(i&&!h||e==null&&d)return u=`? ${u}`,g&&!p?u+=_(u,t.indent,c(g)):a&&r&&r(),u;p&&(g=null),d?(g&&(u+=_(u,t.indent,c(g))),u=`? ${u}
${l}:`):(u=`${u}:`,g&&(u+=_(u,t.indent,c(g))));let O,y,b;A(e)?(O=!!e.spaceBefore,y=e.commentBefore,b=e.comment):(O=!1,y=null,b=null,e&&typeof e=="object"&&(e=o.createNode(e))),t.implicitKey=!1,!d&&!g&&E(e)&&(t.indentAtStart=u.length+1),a=!1,!m&&f.length>=2&&!t.inFlow&&!d&&he(e)&&!e.flow&&!e.tag&&!e.anchor&&(t.indent=t.indent.substring(2));let S=!1;const $=ee(e,t,()=>S=!0,()=>a=!0);let j=" ";if(g||O||y){if(j=O?`
`:"",y){const k=c(y);j+=`
${W(k,t.indent)}`}$===""&&!t.inFlow?j===`
`&&(j=`

`):j+=`
${t.indent}`}else if(!d&&L(e)){const k=$[0],Q=$.indexOf(`
`),be=Q!==-1,Be=t.inFlow??e.flow??e.items.length===0;if(be||!Be){let Se=!1;if(be&&(k==="&"||k==="!")){let B=$.indexOf(" ");k==="&"&&B!==-1&&B<Q&&$[B+1]==="!"&&(B=$.indexOf(" ",B+1)),(B===-1||Q<B)&&(Se=!0)}Se||(j=`
${t.indent}`)}}else($===""||$[0]===`
`)&&(j="");return u+=j+$,t.inFlow?S&&s&&s():b&&!S?u+=_(u,t.indent,c(b)):a&&r&&r(),u}function Xe(n,e){(n==="debug"||n==="warn")&&console.warn(e)}const G="<<",oe={identify:n=>n===G||typeof n=="symbol"&&n.description===G,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new w(Symbol(G)),{addToJSMap:Me}),stringify:()=>G},Ze=(n,e)=>(oe.identify(e)||E(e)&&(!e.type||e.type===w.PLAIN)&&oe.identify(e.value))&&(n==null?void 0:n.doc.schema.tags.some(t=>t.tag===oe.tag&&t.default));function Me(n,e,t){if(t=n&&V(t)?t.resolve(n.doc):t,he(t))for(const s of t.items)fe(n,e,s);else if(Array.isArray(t))for(const s of t)fe(n,e,s);else fe(n,e,t)}function fe(n,e,t){const s=n&&V(t)?t.resolve(n.doc):t;if(!Ee(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,n,Map);for(const[i,o]of r)e instanceof Map?e.has(i)||e.set(i,o):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0});return e}function ke(n,e,{key:t,value:s}){if(A(t)&&t.addToJSMap)t.addToJSMap(n,e,s);else if(Ze(n,t))Me(n,e,s);else{const r=M(t,"",n);if(e instanceof Map)e.set(r,M(s,r,n));else if(e instanceof Set)e.add(r);else{const i=ve(t,r,n),o=M(s,i,n);i in e?Object.defineProperty(e,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[i]=o}}return e}function ve(n,e,t){if(e===null)return"";if(typeof e!="object")return String(e);if(A(n)&&(t!=null&&t.doc)){const s=We(t.doc,{});s.anchors=new Set;for(const i of t.anchors.keys())s.anchors.add(i.anchor);s.inFlow=!0,s.inStringifyKey=!0;const r=n.toString(s);if(!t.mapKeyWarned){let i=JSON.stringify(r);i.length>40&&(i=i.substring(0,36)+'..."'),Xe(t.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),t.mapKeyWarned=!0}return r}return JSON.stringify(e)}function pe(n,e,t){const s=x(n,void 0,t),r=x(e,void 0,t);return new P(s,r)}class P{constructor(e,t=null){Object.defineProperty(this,C,{value:$e}),this.key=e,this.value=t}clone(e){let{key:t,value:s}=this;return A(t)&&(t=t.clone(e)),A(s)&&(s=s.clone(e)),new P(t,s)}toJSON(e,t){const s=t!=null&&t.mapAsMap?new Map:{};return ke(t,s,this)}toString(e,t,s){return e!=null&&e.doc?He(this,e,t,s):JSON.stringify(this)}}function Ce(n,e,t){return(e.inFlow??n.flow?et:xe)(n,e,t)}function xe({comment:n,items:e},t,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:l}){const{indent:f,options:{commentString:c}}=t,m=Object.assign({},t,{indent:i,type:null});let h=!1;const g=[];for(let p=0;p<e.length;++p){const a=e[p];let u=null;if(A(a))!h&&a.spaceBefore&&g.push(""),te(t,g,a.commentBefore,h),a.comment&&(u=a.comment);else if(N(a)){const y=A(a.key)?a.key:null;y&&(!h&&y.spaceBefore&&g.push(""),te(t,g,y.commentBefore,h))}h=!1;let O=ee(a,m,()=>u=null,()=>h=!0);u&&(O+=_(O,i,c(u))),h&&u&&(h=!1),g.push(s+O)}let d;if(g.length===0)d=r.start+r.end;else{d=g[0];for(let p=1;p<g.length;++p){const a=g[p];d+=a?`
${f}${a}`:`
`}}return n?(d+=`
`+W(c(n),f),l&&l()):h&&o&&o(),d}function et({items:n},e,{flowChars:t,itemIndent:s}){const{indent:r,indentStep:i,flowCollectionPadding:o,options:{commentString:l}}=e;s+=i;const f=Object.assign({},e,{indent:s,inFlow:!0,type:null});let c=!1,m=0;const h=[];for(let p=0;p<n.length;++p){const a=n[p];let u=null;if(A(a))a.spaceBefore&&h.push(""),te(e,h,a.commentBefore,!1),a.comment&&(u=a.comment);else if(N(a)){const y=A(a.key)?a.key:null;y&&(y.spaceBefore&&h.push(""),te(e,h,y.commentBefore,!1),y.comment&&(c=!0));const b=A(a.value)?a.value:null;b?(b.comment&&(u=b.comment),b.commentBefore&&(c=!0)):a.value==null&&(y!=null&&y.comment)&&(u=y.comment)}u&&(c=!0);let O=ee(a,f,()=>u=null);p<n.length-1&&(O+=","),u&&(O+=_(O,s,l(u))),!c&&(h.length>m||O.includes(`
`))&&(c=!0),h.push(O),m=h.length}const{start:g,end:d}=t;if(h.length===0)return g+d;if(!c){const p=h.reduce((a,u)=>a+u.length+2,2);c=e.options.lineWidth>0&&p>e.options.lineWidth}if(c){let p=g;for(const a of h)p+=a?`
${i}${r}${a}`:`
`;return`${p}
${r}${d}`}else return`${g}${o}${h.join(" ")}${o}${d}`}function te({indent:n,options:{commentString:e}},t,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const i=W(e(s),n);t.push(i.trimStart())}}function D(n,e){const t=E(e)?e.value:e;for(const s of n)if(N(s)&&(s.key===e||s.key===t||E(s.key)&&s.key.value===t))return s}class J extends Le{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(T,e),this.items=[]}static from(e,t,s){const{keepUndefined:r,replacer:i}=s,o=new this(e),l=(f,c)=>{if(typeof i=="function")c=i.call(t,f,c);else if(Array.isArray(i)&&!i.includes(f))return;(c!==void 0||r)&&o.items.push(pe(f,c,s))};if(t instanceof Map)for(const[f,c]of t)l(f,c);else if(t&&typeof t=="object")for(const f of Object.keys(t))l(f,t[f]);return typeof e.sortMapEntries=="function"&&o.items.sort(e.sortMapEntries),o}add(e,t){var o;let s;N(e)?s=e:!e||typeof e!="object"||!("key"in e)?s=new P(e,e==null?void 0:e.value):s=new P(e.key,e.value);const r=D(this.items,s.key),i=(o=this.schema)==null?void 0:o.sortMapEntries;if(r){if(!t)throw new Error(`Key ${s.key} already set`);E(r.value)&&Ae(s.value)?r.value.value=s.value:r.value=s.value}else if(i){const l=this.items.findIndex(f=>i(s,f)<0);l===-1?this.items.push(s):this.items.splice(l,0,s)}else this.items.push(s)}delete(e){const t=D(this.items,e);return t?this.items.splice(this.items.indexOf(t),1).length>0:!1}get(e,t){const s=D(this.items,e),r=s==null?void 0:s.value;return(!t&&E(r)?r.value:r)??void 0}has(e){return!!D(this.items,e)}set(e,t){this.add(new P(e,t),!0)}toJSON(e,t,s){const r=s?new s:t!=null&&t.mapAsMap?new Map:{};t!=null&&t.onCreate&&t.onCreate(r);for(const i of this.items)ke(t,r,i);return r}toString(e,t,s){if(!e)return JSON.stringify(this);for(const r of this.items)if(!N(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Ce(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:s,onComment:t})}}class Pe extends Le{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(z,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=H(e);return typeof t!="number"?!1:this.items.splice(t,1).length>0}get(e,t){const s=H(e);if(typeof s!="number")return;const r=this.items[s];return!t&&E(r)?r.value:r}has(e){const t=H(e);return typeof t=="number"&&t<this.items.length}set(e,t){const s=H(e);if(typeof s!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[s];E(r)&&Ae(t)?r.value=t:this.items[s]=t}toJSON(e,t){const s=[];t!=null&&t.onCreate&&t.onCreate(s);let r=0;for(const i of this.items)s.push(M(i,String(r++),t));return s}toString(e,t,s){return e?Ce(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:s,onComment:t}):JSON.stringify(this)}static from(e,t,s){const{replacer:r}=s,i=new this(e);if(t&&Symbol.iterator in Object(t)){let o=0;for(let l of t){if(typeof r=="function"){const f=t instanceof Set?l:String(o++);l=r.call(t,f,l)}i.items.push(x(l,void 0,s))}}return i}}function H(n){let e=E(n)?n.value:n;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}function tt(n,e,t){const{replacer:s}=t,r=new Pe(n);r.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let o of e){typeof s=="function"&&(o=s.call(e,String(i++),o));let l,f;if(Array.isArray(o))if(o.length===2)l=o[0],f=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const c=Object.keys(o);if(c.length===1)l=c[0],f=o[l];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else l=o;r.items.push(pe(l,f,t))}return r}class ye extends Pe{constructor(){super(),this.add=J.prototype.add.bind(this),this.delete=J.prototype.delete.bind(this),this.get=J.prototype.get.bind(this),this.has=J.prototype.has.bind(this),this.set=J.prototype.set.bind(this),this.tag=ye.tag}toJSON(e,t){if(!t)return super.toJSON(e);const s=new Map;t!=null&&t.onCreate&&t.onCreate(s);for(const r of this.items){let i,o;if(N(r)?(i=M(r.key,"",t),o=M(r.value,i,t)):i=M(r,"",t),s.has(i))throw new Error("Ordered maps must not include duplicate keys");s.set(i,o)}return s}static from(e,t,s){const r=tt(e,t,s),i=new this;return i.items=r.items,i}}ye.tag="tag:yaml.org,2002:omap";class me extends J{constructor(e){super(e),this.tag=me.tag}add(e){let t;N(e)?t=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?t=new P(e.key,null):t=new P(e,null),D(this.items,t.key)||this.items.push(t)}get(e,t){const s=D(this.items,e);return!t&&N(s)?E(s.key)?s.key.value:s.key:s}set(e,t){if(typeof t!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const s=D(this.items,e);s&&!t?this.items.splice(this.items.indexOf(s),1):!s&&t&&this.items.push(new P(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,s){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,s);throw new Error("Set items must all have null values")}static from(e,t,s){const{replacer:r}=s,i=new this(e);if(t&&Symbol.iterator in Object(t))for(let o of t)typeof r=="function"&&(o=r.call(t,o,o)),i.items.push(pe(o,null,s));return i}}me.tag="tag:yaml.org,2002:set";new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);function nt(n){if(!n)return"";const e=new Date(n);return`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`}function st(n){if(!n)return"";const e=nt(n),t=new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${e} at ${t}`}function rt(n){return Object.entries(n).map(([e,t])=>`${e}:${t}`).join(";")}export{st as a,nt as f,rt as s};
