import{a as c,t as h}from"../chunks/disclose-version.B-guDTDr.js";import"../chunks/legacy.DkBb36tQ.js";import{s as a,f as u,c as t,r as n,n as m}from"../chunks/runtime.BVU0rH9e.js";import{h as r}from"../chunks/html.BOQzYzLL.js";var d=h('<p>(Notes primarily for my own reference.)</p> <p>I want this so that I don’t have to set up a bunch of generic accounts for each machine, seems like it could very quickly spiral into a maintenance nightmare. Keep in mind that most Google Workplace orgs will block these for many reasons. Somehow, Microsoft doesn’t seem to care.</p> <p>I settled on <a href="https://github.com/bokysan/docker-postfix" rel="nofollow">this docker image</a> after trying the following:</p> <ul><li>The built in SMTP server on Windows Server 2022: Just flat-out doesn’t work to the point where attempting to send crashes the service outright. Seriously, fuck this thing. What a ginormous waste of time.</li> <li>Postfix under WSL(2): WSL(2) is ALSO not supported on Windows Server because Microsoft fucking hates you.</li></ul> <p>Once you’ve got Docker set up:</p> <pre class="language-powershell"><!></pre> <p>When sending emails, make sure to set the server to <code>localhost:1587</code>.</p> <h1>Bonus!</h1> <p>You may be operating this from a network where the MX records aren’t working for one reason or another. You can manually specify the IP address to route the emails to using the following:</p> <pre class="language-powershell"><!></pre> <p>You can find the MX record IP using a tool like <a href="https://mxtoolbox.com/" rel="nofollow">MXToolbox</a>.</p>',1);function y(p){var o=d(),e=a(u(o),10),l=t(e);r(l,()=>`<code class="language-powershell">docker run &#96;
	<span class="token operator">--</span>name postfix &#96;
	<span class="token operator">-</span>e <span class="token string">"ALLOWED_SENDER_DOMAINS=localhost"</span> &#96;
	<span class="token operator">--</span>restart always &#96;
	<span class="token operator">-</span>p 1587:587 &#96;
	boky/postfix</code>`),n(e);var s=a(e,8),i=t(s);r(i,()=>`<code class="language-powershell">docker run &#96;
	<span class="token operator">--</span>name postfix &#96;
	<span class="token operator">-</span>e <span class="token string">"ALLOWED_SENDER_DOMAINS=localhost"</span> &#96;
	<span class="token operator">--</span>restart always &#96;
	<span class="token operator">-</span>p 1587:587 &#96;
	<span class="token operator">-</span>e <span class="token string">"POSTFIX_disable_dns_lookups=yes"</span> &#96;
	<span class="token operator">--</span><span class="token function">add-host</span> <span class="token namespace">[DOMAIN NAME]</span>:<span class="token namespace">[MX RECORD IP]</span> &#96;
	boky/postfix</code>`),n(s),m(2),c(p,o)}export{y as component};
